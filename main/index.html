<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ä°ÅŸitsel EÄŸitim - Ana Sayfa</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="nav-content">
        <a href="index.html" class="nav-logo">
          <img src="../site-logo.png" alt="Logo">
          Ä°ÅŸitsel EÄŸitim
        </a>

        <ul class="nav-links">
          <li><a href="index.html" class="nav-link">Ana Sayfa</a></li>
          <li><a href="leaderboard.html" class="nav-link">Liderlik</a></li>
          <li><a href="achievements.html" class="nav-link">BaÅŸarÄ±mlar</a></li>
        </ul>

        <div class="nav-auth">
          <div id="auth-section">
            <!-- Auth buttons will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Hero Section -->
      <section class="hero">
        <h1>Ä°ÅŸitsel EÄŸitim Merkezi</h1>
        <p> MÃ¼zik teknolojilerini interaktif oyunlarla Ã¶ÄŸrenin. Kulak eÄŸitimi, ses dengesi ve frekans analizi
          becerilerinizi geliÅŸtirin.</p>
      </section>

      <!-- Welcome Message -->
      <div id="welcome-message" class="alert alert-success" style="display: none;">
        <span id="welcome-text"></span>
      </div>

      <!-- Games Grid -->
      <section class="games-grid">
        <!-- Frequency Game -->
        <div class="game-card">
          <div class="game-icon">ğŸšï¸</div>
          <h2 class="game-title">Frequency Game</h2>
          <p class="game-description">
            EQ analizi yaparak hangi frekansÄ±n yÃ¼kseltildiÄŸini tahmin edin.
            Kulak eÄŸitimi ve frekans tanÄ±ma becerilerinizi geliÅŸtirir.
          </p>
          <a href="../frequency-game/index.html?v=1" class="btn btn-primary">
            ğŸ® Oyna
          </a>
        </div>

        <!-- Compressor Game -->
        <div class="game-card">
          <div class="game-icon">ğŸ”Š</div>
          <h2 class="game-title">Compressor Game</h2>
          <p class="game-description">
            FarklÄ± kompresÃ¶r ayarlarÄ±nÄ± dinleyerek hangi parametrenin deÄŸiÅŸtiÄŸini bulun.
            Dinamik iÅŸleme ve ses kontrol teknikleri Ã¶ÄŸrenin.
          </p>
          <a href="../compressor-game/index.html?v=1" class="btn btn-primary">
            ğŸ® Oyna
          </a>
        </div>

        <!-- Balance Game -->
        <div class="game-card">
          <div class="game-icon">âš–ï¸</div>
          <h2 class="game-title">Balance Game</h2>
          <p class="game-description">
            Ã‡ok kanallÄ± ses mikslerini dinleyerek hangi enstrÃ¼manÄ±n seviyesinin deÄŸiÅŸtiÄŸini tespit edin.
            Mixing ve ses dengesi becerilerinizi artÄ±rÄ±n.
          </p>
          <a href="../balance-game/index.html?v=1" class="btn btn-primary">
            ğŸ® Oyna
          </a>
        </div>

        <!-- Stereo Game -->
        <div class="game-card">
          <div class="game-icon">ğŸ§</div>
          <h2 class="game-title">Stereo Game</h2>
          <p class="game-description">
            Stereo gÃ¶rÃ¼ntÃ¼deki deÄŸiÅŸiklikleri fark ederek hangi ses kaynaÄŸÄ±nÄ±n pozisyonunun deÄŸiÅŸtiÄŸini bulun.

          </p>
          <a href="../stereo-game/index.html?v=1" class="btn btn-primary">
            ğŸ® Oyna
          </a>
        </div>
      </section>
    </div>
  </main>

  <!-- Loading indicator -->
  <div id="loading" class="loading" style="display: none;">
    <div class="spinner"></div>
  </div>

  <!-- Scripts -->
  <script type="module">
    import { onAuthChange } from './js/auth.js';

    let currentUser = null;

    // DOM elements
    const authSection = document.getElementById('auth-section');
    const welcomeMessage = document.getElementById('welcome-message');
    const welcomeText = document.getElementById('welcome-text');
    const loading = document.getElementById('loading');

    // Auth state listener
    onAuthChange(async (user) => {
      loading.style.display = 'flex';

      if (user) {
        currentUser = user;
        await updateUserInterface(user);
        showWelcomeMessage(user.email);
      } else {
        currentUser = null;
        showGuestInterface();
        hideWelcomeMessage();
      }

      loading.style.display = 'none';
    });

    // Update interface for logged in user
    async function updateUserInterface(user) {
      // Update auth section
      authSection.innerHTML = `
        <a href="profile.html" class="nav-link">ğŸ‘¤ Profil</a>
        <button id="logout-btn" class="btn btn-danger">Ã‡Ä±kÄ±ÅŸ</button>
      `;

      // Add logout functionality
      document.getElementById('logout-btn').addEventListener('click', async () => {
        const { logout } = await import('./js/auth.js');
        await logout();
        window.location.reload();
      });
    }

    // Show interface for guest users
    function showGuestInterface() {
      authSection.innerHTML = `
        <a href="login.html" class="btn btn-primary">GiriÅŸ Yap</a>
        <a href="login.html?mode=register" class="btn btn-secondary">KayÄ±t Ol</a>
      `;
    }

    // Show welcome message
    function showWelcomeMessage(email) {
      welcomeText.textContent = `HoÅŸ geldin, ${email}! ğŸ‰`;
      welcomeMessage.style.display = 'block';
    }

    // Hide welcome message
    function hideWelcomeMessage() {
      welcomeMessage.style.display = 'none';
    }

    // Initialize the page
    console.log('ğŸ  Ana sayfa yÃ¼klendi');
  </script>
</body>

</html>